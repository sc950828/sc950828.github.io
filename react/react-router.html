<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>路由介绍 | 苏纯的博客</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/randy.jpg">
    <meta name="description" content="前端路上的点点滴滴">
    <meta name="keywords" content="苏纯，苏纯的博客，苏纯的个人博客">
    
    <link rel="preload" href="/assets/css/0.styles.e4d8b86b.css" as="style"><link rel="preload" href="/assets/js/app.e65bc892.js" as="script"><link rel="preload" href="/assets/js/2.85e80f7c.js" as="script"><link rel="preload" href="/assets/js/45.a2637689.js" as="script"><link rel="prefetch" href="/assets/js/10.2cc7c1b7.js"><link rel="prefetch" href="/assets/js/100.503d6824.js"><link rel="prefetch" href="/assets/js/101.467351b9.js"><link rel="prefetch" href="/assets/js/102.85da88e3.js"><link rel="prefetch" href="/assets/js/103.e80b0a30.js"><link rel="prefetch" href="/assets/js/104.76ce46e4.js"><link rel="prefetch" href="/assets/js/105.b9551c64.js"><link rel="prefetch" href="/assets/js/106.1046dc50.js"><link rel="prefetch" href="/assets/js/107.3711410c.js"><link rel="prefetch" href="/assets/js/108.1baa70fb.js"><link rel="prefetch" href="/assets/js/11.5576952a.js"><link rel="prefetch" href="/assets/js/12.cbc6050f.js"><link rel="prefetch" href="/assets/js/13.3eede3b1.js"><link rel="prefetch" href="/assets/js/14.e2bc046e.js"><link rel="prefetch" href="/assets/js/15.94510f86.js"><link rel="prefetch" href="/assets/js/16.51993914.js"><link rel="prefetch" href="/assets/js/17.fdab191d.js"><link rel="prefetch" href="/assets/js/18.6952ef03.js"><link rel="prefetch" href="/assets/js/19.66a682be.js"><link rel="prefetch" href="/assets/js/20.f1e52e83.js"><link rel="prefetch" href="/assets/js/21.d299cc10.js"><link rel="prefetch" href="/assets/js/22.d045f903.js"><link rel="prefetch" href="/assets/js/23.4b8706c2.js"><link rel="prefetch" href="/assets/js/24.d828a160.js"><link rel="prefetch" href="/assets/js/25.9207a2db.js"><link rel="prefetch" href="/assets/js/26.4dfe712f.js"><link rel="prefetch" href="/assets/js/27.5198e671.js"><link rel="prefetch" href="/assets/js/28.9fb3d91b.js"><link rel="prefetch" href="/assets/js/29.48dd22f8.js"><link rel="prefetch" href="/assets/js/3.c5a6cd19.js"><link rel="prefetch" href="/assets/js/30.604534e0.js"><link rel="prefetch" href="/assets/js/31.0670a7d6.js"><link rel="prefetch" href="/assets/js/32.855f67fe.js"><link rel="prefetch" href="/assets/js/33.b79b25bf.js"><link rel="prefetch" href="/assets/js/34.c70a6892.js"><link rel="prefetch" href="/assets/js/35.74e0fda4.js"><link rel="prefetch" href="/assets/js/36.2f9de622.js"><link rel="prefetch" href="/assets/js/37.2b0a90ff.js"><link rel="prefetch" href="/assets/js/38.88bba1cc.js"><link rel="prefetch" href="/assets/js/39.83d8f1a2.js"><link rel="prefetch" href="/assets/js/4.bc4e02d5.js"><link rel="prefetch" href="/assets/js/40.5f845ce9.js"><link rel="prefetch" href="/assets/js/41.9e101dea.js"><link rel="prefetch" href="/assets/js/42.fdd55e63.js"><link rel="prefetch" href="/assets/js/43.e394ed90.js"><link rel="prefetch" href="/assets/js/44.a36447cd.js"><link rel="prefetch" href="/assets/js/46.4a4b1a79.js"><link rel="prefetch" href="/assets/js/47.02b87045.js"><link rel="prefetch" href="/assets/js/48.a633a822.js"><link rel="prefetch" href="/assets/js/49.4fba2abe.js"><link rel="prefetch" href="/assets/js/5.416fc629.js"><link rel="prefetch" href="/assets/js/50.ece1958a.js"><link rel="prefetch" href="/assets/js/51.08838220.js"><link rel="prefetch" href="/assets/js/52.2c97c109.js"><link rel="prefetch" href="/assets/js/53.d9bed3cc.js"><link rel="prefetch" href="/assets/js/54.f14f894f.js"><link rel="prefetch" href="/assets/js/55.f86d3182.js"><link rel="prefetch" href="/assets/js/56.967c5b4c.js"><link rel="prefetch" href="/assets/js/57.ee31adeb.js"><link rel="prefetch" href="/assets/js/58.e4f97fc3.js"><link rel="prefetch" href="/assets/js/59.ba87c446.js"><link rel="prefetch" href="/assets/js/6.3003f5cf.js"><link rel="prefetch" href="/assets/js/60.0fd687b2.js"><link rel="prefetch" href="/assets/js/61.14c29aa8.js"><link rel="prefetch" href="/assets/js/62.02ed4a84.js"><link rel="prefetch" href="/assets/js/63.4f244790.js"><link rel="prefetch" href="/assets/js/64.90f95442.js"><link rel="prefetch" href="/assets/js/65.6fcecaac.js"><link rel="prefetch" href="/assets/js/66.30dc9e49.js"><link rel="prefetch" href="/assets/js/67.30e77409.js"><link rel="prefetch" href="/assets/js/68.1ae103d0.js"><link rel="prefetch" href="/assets/js/69.2bb1b3ba.js"><link rel="prefetch" href="/assets/js/7.bbe000a8.js"><link rel="prefetch" href="/assets/js/70.e1e9078a.js"><link rel="prefetch" href="/assets/js/71.fb3fb6bc.js"><link rel="prefetch" href="/assets/js/72.d2af19fa.js"><link rel="prefetch" href="/assets/js/73.78deac33.js"><link rel="prefetch" href="/assets/js/74.77e5798c.js"><link rel="prefetch" href="/assets/js/75.74ccbd2e.js"><link rel="prefetch" href="/assets/js/76.0c18d1d7.js"><link rel="prefetch" href="/assets/js/77.b6984bdc.js"><link rel="prefetch" href="/assets/js/78.469bdbcd.js"><link rel="prefetch" href="/assets/js/79.cb7728c0.js"><link rel="prefetch" href="/assets/js/8.3886c466.js"><link rel="prefetch" href="/assets/js/80.c0406a4b.js"><link rel="prefetch" href="/assets/js/81.1268ffd3.js"><link rel="prefetch" href="/assets/js/82.1c9fd783.js"><link rel="prefetch" href="/assets/js/83.49eb541a.js"><link rel="prefetch" href="/assets/js/84.3a81bdc3.js"><link rel="prefetch" href="/assets/js/85.9a3ca1b0.js"><link rel="prefetch" href="/assets/js/86.50d7abf5.js"><link rel="prefetch" href="/assets/js/87.c857b6fb.js"><link rel="prefetch" href="/assets/js/88.727da12b.js"><link rel="prefetch" href="/assets/js/89.0645d794.js"><link rel="prefetch" href="/assets/js/9.ca7f7cc1.js"><link rel="prefetch" href="/assets/js/90.496a5ff3.js"><link rel="prefetch" href="/assets/js/91.1ed206dd.js"><link rel="prefetch" href="/assets/js/92.ca50f394.js"><link rel="prefetch" href="/assets/js/93.32e5d343.js"><link rel="prefetch" href="/assets/js/94.d217474c.js"><link rel="prefetch" href="/assets/js/95.9cda0ec7.js"><link rel="prefetch" href="/assets/js/96.652ba2c1.js"><link rel="prefetch" href="/assets/js/97.77aee651.js"><link rel="prefetch" href="/assets/js/98.05d8dd2a.js"><link rel="prefetch" href="/assets/js/99.dec73291.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4d8b86b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">苏纯的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide.html" class="nav-link">
  导航
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="个人收藏" class="dropdown-title"><span class="title">个人收藏</span> <span class="arrow down"></span></button> <button type="button" aria-label="个人收藏" class="mobile-dropdown-title"><span class="title">个人收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/个人收藏/好文章.html" class="nav-link">
  好文章
</a></li><li class="dropdown-item"><!----> <a href="/个人收藏/面试好文章.html" class="nav-link">
  面试好文章
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/sc950828" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide.html" class="nav-link">
  导航
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="个人收藏" class="dropdown-title"><span class="title">个人收藏</span> <span class="arrow down"></span></button> <button type="button" aria-label="个人收藏" class="mobile-dropdown-title"><span class="title">个人收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/个人收藏/好文章.html" class="nav-link">
  好文章
</a></li><li class="dropdown-item"><!----> <a href="/个人收藏/面试好文章.html" class="nav-link">
  面试好文章
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/sc950828" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/html5" class="sidebar-heading clickable"><span>html5</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/css3" class="sidebar-heading clickable"><span>css3</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/js" class="sidebar-heading clickable"><span>js</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/ts" class="sidebar-heading clickable"><span>ts</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/vue" class="sidebar-heading clickable"><span>vue</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/react" class="sidebar-heading clickable router-link-active open"><span>react</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/react/react.html" class="sidebar-link">react</a></li><li><a href="/react/hooks.html" class="sidebar-link">hooks</a></li><li><a href="/react/react-router.html" aria-current="page" class="active sidebar-link">react-router</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/react/react-redux.html" class="sidebar-link">react-redux</a></li><li><a href="/react/react和vue对比.html" class="sidebar-link">react和vue对比</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/构建" class="sidebar-heading clickable"><span>构建</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/web安全" class="sidebar-heading clickable"><span>web安全</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/性能优化" class="sidebar-heading clickable"><span>性能优化</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/app" class="sidebar-heading clickable"><span>app</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/git" class="sidebar-heading clickable"><span>git</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/计算机" class="sidebar-heading clickable"><span>计算机</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/服务器" class="sidebar-heading clickable"><span>服务器</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h3 id="路由介绍"><a href="#路由介绍" class="header-anchor">#</a> 路由介绍</h3> <p>react-router 是完整的 react 的路由解决方案，它保持 UI 与 URL 的同步。在项目中我们使用的是最新的 v4 版。</p> <p>需要注意的是，在开发中不应该直接安装 react-router，因为 👉：在 v4 版中 react-router 被拆分成三个包：react-router，react-router-dom，react-router-native。</p> <ul><li>react-router：提供核心的路由组件和函数。</li> <li>react-router-dom：提供浏览器使用的路由组件和函数。</li> <li>react-router-native：提供 react-native 对应平台使用的路由组件和函数。</li></ul> <p>v4 相比于 v1、v2、v3 几乎是重写了，遵循 Just Component 的 API 设计理念。主要变更有：声明式、可组合</p> <p>进行网站（将会运行在浏览器环境中）构建，我们应当安装 react-router-dom。因为 react-router-dom 已经暴露出 react-router 中暴露的对象与方法，因此你只需要安装并引用 react-router-dom 即可。</p> <div class="language- extra-class"><pre class="language-text"><code>React Router 中的组件主要分为三类：
路由器，像&lt;BrowserRouter&gt;和&lt;HashRouter&gt;
路线匹配器，例如&lt;Route&gt;和&lt;Switch&gt;
和导航，喜欢&lt;Link&gt;，&lt;NavLink&gt;和&lt;Redirect&gt;

对于Web项目，react-router-dom提供&lt;BrowserRouter&gt;和&lt;HashRouter&gt;路由器。
两者之间的主要区别是它们存储URL和与Web服务器通信的方式。

&lt;BrowserRouter&gt;使用常规的URL路径。这些通常是外观最好的URL，但是它们要求正确配置服务器。
具体来说，您的Web服务器需要在所有由React Router客户端管理的URL上提供相同的页面。需要额外配置。

&lt;HashRouter&gt;将当前位置存储在URL 的hash一部分中，因此URL看起来像http://example.com/#/your/page。
由于哈希从不发送到服务器，因此这意味着不需要特殊的服务器配置。

BrowserRouter
basename 所有位置的基本URL
getUserConfirmation：func 用于确认导航的功能。默认使用window.confirm。
forceRefresh：布尔 如果true路由器将使用整页刷新页面导航。
keyLength：数字 location.key的长度。默认为6。

HashRouter 哈希历史记录不支持location.key或location.state。这个是用来兼容老浏览器的，建议使用BrowserRouter
basename 所有位置的基本URL
getUserConfirmation：func 用于确认导航的功能。默认使用window.confirm。
hashType：字符串 编码类型window.location.hash 默认slash
</code></pre></div><h3 id="link"><a href="#link" class="header-anchor">#</a> Link</h3> <div class="language- extra-class"><pre class="language-text"><code>Link
to属性
  接受path字符串，&lt;Link to=&quot;/a&quot; /&gt;
  接受对象
  &lt;Link to={{
      pathname: '/courses',  // 传递的pathname
      search: '?sort=name',  // 传递的url参数
      hash: '#the-hash', // 在url参数后面的hash值
      state: { fromDashboard: true } // 自定义属性存在location中
  }}/&gt;
replace，设置为true，会取代当前历史记录
innerRef 访问Link标签的dom

NavLink
NavLink和Link一样最终都是渲染成a标签，NavLink可以给这个a标签添加额外的属性
&lt;NavLink to=&quot;/a&quot;&gt;组件一&lt;/NavLink&gt; 当点击此路由，a标签默认添加一个名为active的class
属性
  activeClassName 用于自定义激活a标签的class
  activeStyle 用于设置激活a标签的样式
    activeStyle={{
        fontWeight: 'bold',
        color: 'red'
    }}
  exact，当路径百分百匹配的时候才展示样式和class，但是不影响路由的匹配，&quot;/a&quot;和&quot;/a/&quot; 是相等的
  strict，这个比exact还很，就算 &quot;/a&quot;和&quot;/a/&quot; 也是不相等的
  isActive，此属性接收一个回调函数，用来做跳转的最后拦截
    &lt;NavLink isActive={oddEvent} to=&quot;/a/123&quot;&gt;组件一&lt;/NavLink&gt;
    const oddEvent = (match, location) =&gt; {
        if (!match) {
            return false
        }
        return true
    }
    match里面保存了路由匹配信息的参数，是动态化的
    location里面保存的Link中的to传递的所有信息
  location，此参数用来接受一个location对象，如果对象信息和当前的location信息对象匹配则跳转
    &lt;NavLink to=&quot;/a/123&quot; location={{key:&quot;mb5wu3&quot;,pathname:&quot;/a/123&quot;}}/&gt;
</code></pre></div><h3 id="router"><a href="#router" class="header-anchor">#</a> Router</h3> <div class="language- extra-class"><pre class="language-text"><code>低级路由，适用于任何路由组件，主要和redux深度集成，使用必须配合history对象
使用Router路由的目的是和状态管理库如redux中的history同步对接
import { Router } from 'react-router'
import { createBrowserHistory } from 'history/createBrowserHistory'
const history = createBrowserHistory();
&lt;Router history={history}&gt;
    ...
&lt;/Router&gt;
</code></pre></div><h3 id="route"><a href="#route" class="header-anchor">#</a> Route</h3> <div class="language- extra-class"><pre class="language-text"><code>Route的作用就是用来渲染路由匹配的组件
路由渲染有三种方式，每一种方式都可以传递match,location,history对象
  component
    用来渲染组件
    &lt;Route path=&quot;/a&quot; component={MyComponent1}&gt;&lt;/Route&gt;
  render
    用来渲染函数式组件，可以防止重复渲染组件
    &lt;Route path=&quot;/b&quot; render={({match,location,history}) =&gt; {
      console.log(match,location,history);
      return &lt;div&gt;组件二&lt;/div&gt;
    }}&gt;&lt;/Route&gt;
  children
    和render差不多，不过可以用来动态的展示组件
    差別之处在于，children会在路径不匹配的时候也调用回调从而渲染函数，而render只会在路径匹配的时候触发回调
    &lt;Route path=&quot;/b&quot; children={({match,location,history}) =&gt; {
      return (
        match ? &lt;div&gt;组件二&lt;/div&gt;:&lt;div&gt;组件二二&lt;/div&gt;
      )
    }}&gt;&lt;/Route&gt;
属性
  path，字符串，匹配的路径
  exact，布尔值，路径完全匹配的时候跳转 &quot;/a/&quot;和&quot;/a&quot;是一样的
  strict，布尔值，单独使用和没有使用这个属性没有任何区別，如果和exact一起使用可以构建更为精确的匹配模式。&quot;/a/&quot;和&quot;/a&quot;是不同的。
  sensitive 是否区分path的大小写
  location，传递route对象，和当前的route对象对比，如果匹配则跳转，如果不匹配则不跳转。另外，如果route包含在swicth组件中，如果route的location和switch的location匹配，那么route的location会被switch的location替代
</code></pre></div><h3 id="history"><a href="#history" class="header-anchor">#</a> history</h3> <p>useHistory 挂钩使您可以访问 history 可用于导航的实例。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> history <span class="token operator">=</span> <span class="token function">useHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 有如下属性和方法</span>
History <span class="token punctuation">{</span>
  length<span class="token operator">:</span> number<span class="token punctuation">;</span>
  action<span class="token operator">:</span> Action<span class="token punctuation">;</span>
  location<span class="token operator">:</span> Location<span class="token punctuation">;</span>
  <span class="token function">push</span><span class="token punctuation">(</span>path<span class="token operator">:</span> Path<span class="token punctuation">,</span> state<span class="token operator">?</span><span class="token operator">:</span> LocationState<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span> <span class="token comment">// 调用push前进到一个地址,可以接受一个state对象，就是自定义的路由数据</span>
  <span class="token function">push</span><span class="token punctuation">(</span>location<span class="token operator">:</span> LocationDescriptorObject<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span> <span class="token comment">// 接受一个location的描述对象</span>
  <span class="token function">replace</span><span class="token punctuation">(</span>path<span class="token operator">:</span> Path<span class="token punctuation">,</span> state<span class="token operator">?</span><span class="token operator">:</span> LocationState<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span> <span class="token comment">// 用页面替换当前的路径，不可再goBack</span>
  <span class="token function">replace</span><span class="token punctuation">(</span>location<span class="token operator">:</span> LocationDescriptorObject<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span> <span class="token comment">// 同上</span>
  <span class="token function">go</span><span class="token punctuation">(</span>n<span class="token operator">:</span> number<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span> <span class="token comment">// 往前走多少也页面</span>
  <span class="token function">goBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span> <span class="token comment">// 返回一个页面</span>
  <span class="token function">goForward</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span> <span class="token comment">// 前进一个页面</span>
  <span class="token function">block</span><span class="token punctuation">(</span>prompt<span class="token operator">?</span><span class="token operator">:</span> boolean <span class="token operator">|</span> string <span class="token operator">|</span> TransitionPromptHook<span class="token punctuation">)</span><span class="token operator">:</span> UnregisterCallback<span class="token punctuation">;</span>
  <span class="token function">listen</span><span class="token punctuation">(</span>listener<span class="token operator">:</span> LocationListener<span class="token punctuation">)</span><span class="token operator">:</span> UnregisterCallback<span class="token punctuation">;</span>
  <span class="token function">createHref</span><span class="token punctuation">(</span>location<span class="token operator">:</span> LocationDescriptorObject<span class="token punctuation">)</span><span class="token operator">:</span> Href<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="match"><a href="#match" class="header-anchor">#</a> match</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 对象表示当前的路由地址是怎么跳转过来的，包含的属性如下</span>
<span class="token punctuation">{</span>
  isExact<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 表示匹配到当前路径是否是完全匹配</span>
  params<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 表示路径的动态参数值 this.props.match.params.xx</span>
  path<span class="token operator">:</span> <span class="token string">'/c'</span><span class="token punctuation">,</span> <span class="token comment">// 匹配到的原始路径</span>
  url<span class="token operator">:</span> <span class="token string">'/c'</span> <span class="token comment">// 匹配到的实际路径</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="location"><a href="#location" class="header-anchor">#</a> location</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// location对象表示当前的路由位置信息，主要包含如下属性</span>
<span class="token punctuation">{</span>
  hash<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
  key<span class="token operator">:</span> <span class="token string">&quot;k9r4i3&quot;</span><span class="token punctuation">,</span>
  pathname<span class="token operator">:</span> <span class="token string">&quot;/c&quot;</span><span class="token punctuation">,</span>
  state<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
  search<span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="withrouter"><a href="#withrouter" class="header-anchor">#</a> withRouter</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 当一个非路由组件也想访问到当前路由的match,location,history对象，那么withRouter将是一个非常好的选择</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> withRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">MyComponent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> match<span class="token punctuation">,</span> location<span class="token punctuation">,</span> history <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>location<span class="token punctuation">.</span>pathname<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> FirstTest <span class="token operator">=</span> <span class="token function">withRouter</span><span class="token punctuation">(</span>MyComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="使用"><a href="#使用" class="header-anchor">#</a> 使用</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 根组件使用 BrowserRouter包裹</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> BrowserRouter <span class="token keyword">as</span> Router <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>Router<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Router<span class="token operator">&gt;</span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">&quot;/hello&quot;</span><span class="token operator">&gt;</span>to hello<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">&quot;/params/randy&quot;</span><span class="token operator">&gt;</span>to params name <span class="token operator">=</span> randy<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>
<span class="token comment">// 当&lt;Switch&gt;被渲染，它会搜索其children &lt;Route&gt;内容找到一个其path当前的URL匹配。</span>
<span class="token comment">// 当找到一个对象时，它将渲染该对象，&lt;Route&gt;而忽略所有其他对象。</span>
<span class="token comment">// 这意味着您应将&lt;Route&gt;的特定性更高（通常更长）放在不那么特定的paths 之前。</span>
<span class="token operator">&lt;</span>Switch<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/hello&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Hello<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/params/:name&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Params<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">&gt;</span>

<span class="token comment">// 参数使用useParams获取参数</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>useParams<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span>

<span class="token keyword">function</span> <span class="token function">Params</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 使用useParams获取到参数</span>
  <span class="token keyword">let</span> <span class="token punctuation">{</span> name <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>params <span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="嵌套路由"><a href="#嵌套路由" class="header-anchor">#</a> 嵌套路由</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Route<span class="token punctuation">,</span> useRouteMatch<span class="token punctuation">,</span> Link <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 需要用到path url 也可以写死。</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> path<span class="token punctuation">,</span> url <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useRouteMatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      Parent
      <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token punctuation">{</span>url <span class="token operator">+</span> <span class="token string">&quot;/hello&quot;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>to hello <span class="token punctuation">,</span> <span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token punctuation">{</span>url <span class="token operator">+</span> <span class="token string">&quot;/child/randy&quot;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>to child<span class="token punctuation">,</span> <span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token punctuation">{</span>path <span class="token operator">+</span> <span class="token string">&quot;/hello&quot;</span><span class="token punctuation">}</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Hello<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token punctuation">{</span>path <span class="token operator">+</span> <span class="token string">&quot;/child/:name&quot;</span><span class="token punctuation">}</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Child<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="自定义链接"><a href="#自定义链接" class="header-anchor">#</a> 自定义链接</h3> <p>实际上就是对 Link 组件的封装</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>CustomLink to<span class="token operator">=</span><span class="token string">&quot;/hello&quot;</span> label<span class="token operator">=</span><span class="token string">&quot;to customlink&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>CustomLink<span class="token operator">&gt;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">CustomLink</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> to<span class="token punctuation">,</span> label<span class="token punctuation">,</span> activeOnlyWhenExact <span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">;</span>
  <span class="token keyword">const</span> match <span class="token operator">=</span> <span class="token function">useRouteMatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    path<span class="token operator">:</span> to<span class="token punctuation">,</span>
    exact<span class="token operator">:</span> activeOnlyWhenExact<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span>match <span class="token operator">&amp;&amp;</span> <span class="token string">&quot;&gt;&quot;</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token punctuation">{</span>to<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>label<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="过渡"><a href="#过渡" class="header-anchor">#</a> 过渡</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Prompt <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">GuoDu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 函数组件没有状态 只能通过useState设置state 返回变量名和修改变量的方法，参数是变量的初始值</span>
  <span class="token keyword">let</span> <span class="token punctuation">[</span>isBlocking<span class="token punctuation">,</span> setIsBlocking<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// return true表示可以直接跳转，无需验证</span>
  <span class="token comment">// return '你好'表示要给提示给用户的信息</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Prompt
      when<span class="token operator">=</span><span class="token punctuation">{</span>isBlocking<span class="token punctuation">}</span>
      message<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">location</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Are you sure you want to go to </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>location<span class="token punctuation">.</span>pathname<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
      <span class="token punctuation">}</span>
    <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> GuoDu<span class="token punctuation">;</span>
</code></pre></div><h3 id="_404"><a href="#_404" class="header-anchor">#</a> 404</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useLocation <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">All</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 使用useLocation()获取到location对象</span>
  <span class="token keyword">const</span> location <span class="token operator">=</span> <span class="token function">useLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// pathname: &quot;/guodu1&quot;</span>
  <span class="token comment">// search: &quot;&quot;</span>
  <span class="token comment">// hash: &quot;&quot;</span>
  <span class="token comment">// state: undefined</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>location<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>all <span class="token number">404</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> All<span class="token punctuation">;</span>

<span class="token comment">// Switch 只会匹配一个 匹配到了就不往后面找了</span>
<span class="token comment">// 所以利用这一特点就可以实现404</span>
<span class="token operator">&lt;</span>Switch<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/&quot;</span> exact component<span class="token operator">=</span><span class="token punctuation">{</span>Home<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/hello&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Hello<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;*&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>All<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="重定向"><a href="#重定向" class="header-anchor">#</a> 重定向</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Redirect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// link to /redirecttest会被redirect到/hello链接上 所以会匹配/hello的组件</span>
<span class="token operator">&lt;</span>Route to<span class="token operator">=</span><span class="token string">&quot;/redirecttest&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Redirect to<span class="token operator">=</span><span class="token string">&quot;/hello&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Redirect<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span><span class="token punctuation">;</span>

<span class="token comment">// 路由重定向</span>
<span class="token comment">// 属性</span>
<span class="token comment">//   to</span>
<span class="token comment">//    字符串，要重定向的路径</span>
<span class="token comment">//    对象，location对象</span>
<span class="token comment">//   push，布尔值，是否将当前路径存到history中（是Link标签的to路径）</span>
<span class="token comment">//   from，用来指定路由的原始值，如果不是给定的字符串，那么不渲染，反之渲染，只能用于switch组件中</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/react/hooks.html" class="prev">
        hooks
      </a></span> <span class="next"><a href="/react/react-redux.html">
        react-redux
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.e65bc892.js" defer></script><script src="/assets/js/2.85e80f7c.js" defer></script><script src="/assets/js/45.a2637689.js" defer></script>
  </body>
</html>
