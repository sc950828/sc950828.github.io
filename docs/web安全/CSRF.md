## 定义

CSRF(Cross Site Request Forgy) 全称跨站点请求伪造

主要是在其他网站影响了本网站。在用户不知情的情况下在其他网站对本网站发起了一些请求。

## 攻击原理

1. 用户登录 A 网站
2. A 网站确认身份，返回 cookies
3. 用户访问 B 网站，在 B 网站页面伪造请求向 A 网站发起请求并携带上 A 网站的 cookies

## 防御

### SameSite

利用 cookie 的新特性 SameSite 来控制 cookie 的使用。

当 SameSite=Strict 的时候，任何第三方的请求都不允许带上 cookie

当 SameSite=Lax 的时候允许第三方链接带上 cookie

缺点是目前只有 Chrome 浏览器支持，支持度并不高。

### 验证码

每次请求的时候需要填写验证码，这样在第三方网站伪造请求访问的时候访问不通。

就算第三方网站把验证码模块搬过来，这样在伪造请求的时候需要用户输入验证码，这样伪造请求的难度就加大了，用户就会警醒起来。

### token

每次请求的时候需要携带 token，这样在第三方网站伪造请求访问的时候访问不通。

### referer

referer 为请求来源，我们可以验证 referer 来屏蔽第三方网站的请求
