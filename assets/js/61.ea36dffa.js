(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{417:function(e,t,a){"use strict";a.r(t);var r=a(44),s=Object(r.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h2",{attrs:{id:"定义"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#定义"}},[e._v("#")]),e._v(" 定义")]),e._v(" "),a("p",[e._v("CSRF(Cross Site Request Forgy) 全称跨站点请求伪造。")]),e._v(" "),a("p",[e._v("主要是在其他网站影响了本网站。在用户不知情的情况下在其他网站对本网站发起了一些请求。")]),e._v(" "),a("p",[e._v("一般是黑客诱导用户点击链接，打开黑客的网站，然后黑客利用用户目前的登录状态发起跨站请求。")]),e._v(" "),a("h2",{attrs:{id:"攻击原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#攻击原理"}},[e._v("#")]),e._v(" 攻击原理")]),e._v(" "),a("ol",[a("li",[e._v("用户登录 A 网站")]),e._v(" "),a("li",[e._v("A 网站确认身份，返回 cookies")]),e._v(" "),a("li",[e._v("用户访问 B 网站，在 B 网站页面伪造请求（通过表单提交或者 img 图片，同域会自动带上 cookie 的特性）向 A 网站发起请求")])]),e._v(" "),a("h2",{attrs:{id:"csrf-攻击一般会有三种方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#csrf-攻击一般会有三种方式"}},[e._v("#")]),e._v(" CSRF 攻击一般会有三种方式:")]),e._v(" "),a("ol",[a("li",[e._v("自动 GET 请求 （以加载图片的方式）")]),e._v(" "),a("li",[e._v("自动 POST 请求 （隐藏表单）")]),e._v(" "),a("li",[e._v("诱导点击发送 GET 请求。 （超链接）")])]),e._v(" "),a("h2",{attrs:{id:"防御"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#防御"}},[e._v("#")]),e._v(" 防御")]),e._v(" "),a("h3",{attrs:{id:"samesite"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#samesite"}},[e._v("#")]),e._v(" SameSite")]),e._v(" "),a("p",[e._v("利用 cookie 的新特性 SameSite 来控制 cookie 的使用。SameSite 可以设置为三个值，Strict、Lax 和 None。")]),e._v(" "),a("ol",[a("li",[e._v("当 SameSite=Strict 的时候，任何第三方的请求都不允许带上 cookie，比如请求 randy.com 网站只能在 randy.com 域名当中请求才能携带 Cookie，在其他网站请求都不能。")]),e._v(" "),a("li",[e._v("当 SameSite=Lax 的时候就宽松一点了，但是只能在 get 方法提交表单况或者 a 标签发送 get 请求的情况下可以携带 Cookie，其他情况均不能。")]),e._v(" "),a("li",[e._v("None 模式下，也就是默认模式，请求会自动携带上 Cookie。")])]),e._v(" "),a("p",[e._v("缺点是目前只有 Chrome 浏览器支持，支持度并不高。")]),e._v(" "),a("h3",{attrs:{id:"验证码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#验证码"}},[e._v("#")]),e._v(" 验证码")]),e._v(" "),a("p",[e._v("每次请求的时候需要填写验证码，这样在第三方网站伪造请求访问的时候访问不通。")]),e._v(" "),a("p",[e._v("就算第三方网站把验证码模块搬过来，这样在伪造请求的时候需要用户输入验证码，这样伪造请求的难度就加大了，用户就会警醒起来。")]),e._v(" "),a("h3",{attrs:{id:"token"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#token"}},[e._v("#")]),e._v(" token")]),e._v(" "),a("p",[e._v("每次请求的时候需要携带 token，这样在第三方网站伪造请求访问的时候访问不通。")]),e._v(" "),a("h3",{attrs:{id:"referer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#referer"}},[e._v("#")]),e._v(" referer")]),e._v(" "),a("p",[e._v("referer 为请求来源，我们可以验证 referer 来屏蔽第三方网站的请求")])])}),[],!1,null,null,null);t.default=s.exports}}]);