<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>简介 | 苏纯的博客</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/randy.jpg">
    <meta name="description" content="苏纯,汨罗苏纯,苏纯的博客,苏纯的前端博客,苏纯的个人博客,前端开发">
    <meta name="keywords" content="苏纯,苏纯的博客,苏纯的个人博客,苏纯的前端博客,前端博客,前端个人博客,前端开发">
    
    <link rel="preload" href="/assets/css/0.styles.22fcb12a.css" as="style"><link rel="preload" href="/assets/js/app.30255e96.js" as="script"><link rel="preload" href="/assets/js/2.3fe5eade.js" as="script"><link rel="preload" href="/assets/js/16.07451047.js" as="script"><link rel="prefetch" href="/assets/js/10.f9319f1a.js"><link rel="prefetch" href="/assets/js/11.7c8892d0.js"><link rel="prefetch" href="/assets/js/12.bfd4ae56.js"><link rel="prefetch" href="/assets/js/13.7cd5e1e8.js"><link rel="prefetch" href="/assets/js/14.d3b58c71.js"><link rel="prefetch" href="/assets/js/15.f086b97c.js"><link rel="prefetch" href="/assets/js/17.f91940a4.js"><link rel="prefetch" href="/assets/js/18.380e1d86.js"><link rel="prefetch" href="/assets/js/19.8a466c51.js"><link rel="prefetch" href="/assets/js/20.2b44bd04.js"><link rel="prefetch" href="/assets/js/21.3c129053.js"><link rel="prefetch" href="/assets/js/22.9390abbb.js"><link rel="prefetch" href="/assets/js/23.051467ca.js"><link rel="prefetch" href="/assets/js/24.85aedd8a.js"><link rel="prefetch" href="/assets/js/25.a3b61af0.js"><link rel="prefetch" href="/assets/js/26.ff1c92fd.js"><link rel="prefetch" href="/assets/js/27.396c5348.js"><link rel="prefetch" href="/assets/js/28.e3e4164c.js"><link rel="prefetch" href="/assets/js/29.e69ccd94.js"><link rel="prefetch" href="/assets/js/3.11c80b4e.js"><link rel="prefetch" href="/assets/js/30.28a3997f.js"><link rel="prefetch" href="/assets/js/31.e54ed449.js"><link rel="prefetch" href="/assets/js/32.eb4f0da3.js"><link rel="prefetch" href="/assets/js/33.a05772c0.js"><link rel="prefetch" href="/assets/js/34.c74e9e53.js"><link rel="prefetch" href="/assets/js/35.4aff9555.js"><link rel="prefetch" href="/assets/js/36.c743e87e.js"><link rel="prefetch" href="/assets/js/4.9e16ce31.js"><link rel="prefetch" href="/assets/js/5.126b2f5e.js"><link rel="prefetch" href="/assets/js/6.b325cee5.js"><link rel="prefetch" href="/assets/js/7.1419419a.js"><link rel="prefetch" href="/assets/js/8.5b859010.js"><link rel="prefetch" href="/assets/js/9.2337a7ce.js">
    <link rel="stylesheet" href="/assets/css/0.styles.22fcb12a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">苏纯的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide.html" class="nav-link">
  导航
</a></div><div class="nav-item"><a href="https://juejin.cn/user/3403743730867767/posts" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide.html" class="nav-link">
  导航
</a></div><div class="nav-item"><a href="https://juejin.cn/user/3403743730867767/posts" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/HTML" class="sidebar-heading clickable"><span>HTML</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/CSS" class="sidebar-heading clickable"><span>CSS</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/JavaScript" class="sidebar-heading clickable"><span>JavaScript</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/ECMAScript" class="sidebar-heading clickable"><span>ECMAScript</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/H5" class="sidebar-heading clickable router-link-active open"><span>H5</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/H5/移动端H5网页开发必备知识.html" class="sidebar-link">移动端H5网页开发必备知识</a></li><li><a href="/H5/移动端H5网页开发常见问题汇总.html" class="active sidebar-link">移动端H5网页开发常见问题汇总</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/H5/移动端H5网页开发常见问题汇总.html#简介" class="sidebar-link">简介</a></li><li class="sidebar-sub-header"><a href="/H5/移动端H5网页开发常见问题汇总.html#html-方面" class="sidebar-link">HTML 方面</a></li><li class="sidebar-sub-header"><a href="/H5/移动端H5网页开发常见问题汇总.html#css-方面" class="sidebar-link">CSS 方面</a></li><li class="sidebar-sub-header"><a href="/H5/移动端H5网页开发常见问题汇总.html#js-方面" class="sidebar-link">JS 方面</a></li><li class="sidebar-sub-header"><a href="/H5/移动端H5网页开发常见问题汇总.html#iphonex-适配" class="sidebar-link">iPhoneX 适配</a></li><li class="sidebar-sub-header"><a href="/H5/移动端H5网页开发常见问题汇总.html#深色主题适配方案" class="sidebar-link">深色主题适配方案</a></li><li class="sidebar-sub-header"><a href="/H5/移动端H5网页开发常见问题汇总.html#参考文章" class="sidebar-link">参考文章</a></li><li class="sidebar-sub-header"><a href="/H5/移动端H5网页开发常见问题汇总.html#后记" class="sidebar-link">后记</a></li></ul></li><li><a href="/H5/移动端开发必备知识-HybridApp.html" class="sidebar-link">移动端开发必备知识-HybridApp</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="简介"><a href="#简介" class="header-anchor">#</a> 简介</h2> <p>这篇文章主要是总结下移动端开发常见问题，帮助大家一起避坑。如果已经看过这篇文章了的话也可以看看笔者写的</p> <p><a href="https://juejin.cn/post/7055267089895915527" target="_blank" rel="noopener noreferrer">移动端 H5 网页开发必备知识<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://juejin.cn/post/7062967241268019214" target="_blank" rel="noopener noreferrer">移动端开发必备知识-Hybrid App<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="html-方面"><a href="#html-方面" class="header-anchor">#</a> HTML 方面</h2> <h3 id="调用系统功能"><a href="#调用系统功能" class="header-anchor">#</a> 调用系统功能</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 拨打电话 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tel:10010<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>拨打电话给10010<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 发送短信 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sms:10010<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>发送短信给10010<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 发送邮件 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mailto:randy@qq.com<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>发送邮件给randy<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 选择照片或拍摄照片 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token attr-name">accept</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image/*<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token comment">&lt;!-- 选择视频或拍摄视频 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token attr-name">accept</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>video/*<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token comment">&lt;!-- 选择文件 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token comment">&lt;!-- 多选文件 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token attr-name">multiple</span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><h3 id="忽略自动识别"><a href="#忽略自动识别" class="header-anchor">#</a> 忽略自动识别</h3> <p>有时电话、邮箱的自动识别会很烦，我们可以关闭。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 忽略自动识别电话 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>format-detection<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>telephone=no<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token comment">&lt;!-- 忽略自动识别邮箱 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>format-detection<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>email=no<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token comment">&lt;!-- 忽略自动识别电话和邮箱 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>format-detection<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>telephone=no, email=no<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><h3 id="弹出数字键盘"><a href="#弹出数字键盘" class="header-anchor">#</a> 弹出数字键盘</h3> <p>这里需要注意，系统需要使用的是原生键盘才会生效，不能使用搜狗等输入法，不然只会出现相应输入法的数字键盘。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 纯数字带#和* --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tel<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token comment">&lt;!-- 纯数字 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>number<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pattern</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\d*<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><h3 id="优先使用最新版本-ie-和-chrome"><a href="#优先使用最新版本-ie-和-chrome" class="header-anchor">#</a> 优先使用最新版本 IE 和 Chrome</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge,chrome=1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><h3 id="禁止页面缓存"><a href="#禁止页面缓存" class="header-anchor">#</a> 禁止页面缓存</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Cache-Control<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>no-cache<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><h3 id="关闭首字母大写"><a href="#关闭首字母大写" class="header-anchor">#</a> 关闭首字母大写</h3> <p>当我们使用键盘在输入框输入英文字符的时候，一般首字母会自动大写，如果不需要可以关闭。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">autocapitalize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>off<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><h3 id="关闭输入自动修正"><a href="#关闭输入自动修正" class="header-anchor">#</a> 关闭输入自动修正</h3> <p>和英文输入默认自动首字母大写那样，IOS 还做了一个功能，默认输入法会开启自动修正输入内容，这样的话，用户经常要操作两次。如果不希望开启此功能，我们可以通过 input 标签属性来关闭掉。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">autocorrect</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>off<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><h3 id="禁止页面缩放"><a href="#禁止页面缩放" class="header-anchor">#</a> 禁止页面缩放</h3> <p>不想让页面缩放我们可以把 viewport 的 user-scalable 值设置为 no，这个在上篇文章介绍 viewport 的时候有说到。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span>
  <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, user-scalable=no, initial-scale=1, minimum-scale=1, maximum-scale=1<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">/&gt;</span></span>
</code></pre></div><h3 id="长按识别二维码"><a href="#长按识别二维码" class="header-anchor">#</a> 长按识别二维码</h3> <p>有时候我们会接到需求，就是长按二维码要自动识别出二维码，其实这个是最简单的，就是把我们的图片使用<code>img</code>标签展示出来就可以了。记住不要使用背景图，不然会无效。</p> <h2 id="css-方面"><a href="#css-方面" class="header-anchor">#</a> CSS 方面</h2> <h3 id="_1px-问题"><a href="#_1px-问题" class="header-anchor">#</a> 1px 问题</h3> <p>1px 问题在 Retina 高清屏上才会出现，由于高清屏用多个物理像素显示一个 css 像素，比如 iphone6，由于 dpr 为 2，所以 1css 像素会用 2 个物理像素显示，所以看起来 1px 的线条会特别宽。</p> <p>解决 1px 问题的方案有很多，有背景图、阴影、缩放等等，笔者在这里只介绍笔者曾经使用过得方案，就是缩放。原理就是边框固定，把元素整体先放大然后再缩小。</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.ele</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 80px<span class="token selector">;
  &amp;::after</span> <span class="token punctuation">{</span>
    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">border</span><span class="token punctuation">:</span> 1px solid red<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 200%<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 200%<span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">transform-origin</span><span class="token punctuation">:</span> left top<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如果不想给每个元素都这样设置的话，我们可以采用笔者前面写的<a href="https://juejin.cn/post/7055267089895915527#heading-25" target="_blank" rel="noopener noreferrer">移动端 H5 网页开发必备知识<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>里面介绍的<code>lib-flexible</code>方案，根据 dpr 将网页整体进行缩放。</p> <h3 id="横屏和竖屏"><a href="#横屏和竖屏" class="header-anchor">#</a> 横屏和竖屏</h3> <p>在某些特定横屏或者竖屏的情况下的样式我们可以通过如下@media 查询进行设置。</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token comment">/* 竖屏 */</span>
<span class="token atrule"><span class="token rule">@media</span> all <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">orientation</span><span class="token punctuation">:</span> portrait<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token comment">/* 自定义样式 */</span>
<span class="token punctuation">}</span>

<span class="token comment">/* 横屏 */</span>
<span class="token atrule"><span class="token rule">@media</span> all <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">orientation</span><span class="token punctuation">:</span> landscape<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token comment">/* 自定义样式 */</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="让苹果手机滚动更流畅"><a href="#让苹果手机滚动更流畅" class="header-anchor">#</a> 让苹果手机滚动更流畅</h3> <p>在苹果手机上滚动的时候有时候可能会不流畅，我们可以给元素添加如下属性。</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.elem</span> <span class="token punctuation">{</span>
  <span class="token property">-webkit-overflow-scrolling</span><span class="token punctuation">:</span> touch<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="禁止选择"><a href="#禁止选择" class="header-anchor">#</a> 禁止选择</h3> <p>有时候我们的图片不想让别人长按保存等操作，我们可以使用如下样式，让用户长按图片无效。</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">#img1</span> <span class="token punctuation">{</span>
  <span class="token property">pointer-events</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span> <span class="token comment">/* 微信浏览器还需附加该属性才有效 */</span>
  <span class="token property">user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token property">-webkit-touch-callout</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="原生表单美化"><a href="#原生表单美化" class="header-anchor">#</a> 原生表单美化</h3> <p>我们使用原生表单的时候样式会很丑，特别还有一层灰色的遮罩，我们可以使用如下样式把遮罩进行消除。小伙伴们是不是感觉清爽了很多呢。</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">button,
input,
select,
textarea</span> <span class="token punctuation">{</span>
  <span class="token property">-webkit-appearance</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="元素被点击时产生的半透明灰色遮罩怎么去掉"><a href="#元素被点击时产生的半透明灰色遮罩怎么去掉" class="header-anchor">#</a> 元素被点击时产生的半透明灰色遮罩怎么去掉</h3> <p>当使用原生表单的时候，点击的时候会有个灰色点击特效，如果不需要可以使用如下样式去掉。</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">a,
button,
input,
textarea,
select</span> <span class="token punctuation">{</span>
  <span class="token property">-webkit-tap-highlight-color</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="美化滚动条"><a href="#美化滚动条" class="header-anchor">#</a> 美化滚动条</h3> <p>滚动条样式太丑希望自定义，我们可以使用如下样式属性进行自定义样式。这个是 pc 端和移动端通用的样式。</p> <ul><li><strong>::-webkit-scrollbar</strong>：滚动条整体部分</li> <li><strong>::-webkit-scrollbar-track</strong>：滚动条轨道部分</li> <li><strong>::-webkit-scrollbar-thumb</strong>：滚动条滑块部分</li></ul> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">::-webkit-scrollbar</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 6px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 6px<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">::-webkit-scrollbar-track</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">::-webkit-scrollbar-thumb</span> <span class="token punctuation">{</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 3px<span class="token punctuation">;</span>
  <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>90deg<span class="token punctuation">,</span> #09f<span class="token punctuation">,</span> #3c9<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="美化占位符"><a href="#美化占位符" class="header-anchor">#</a> 美化占位符</h3> <p>这个是 pc 端和移动端通用的样式，当我们需要修改占位符 placeholder 的颜色我们可以使用如下样式。</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">input::placeholder</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="输入框文字居中对齐"><a href="#输入框文字居中对齐" class="header-anchor">#</a> 输入框文字居中对齐</h3> <p>有时候我们就算设置了 line-height 的值等于 height，文字看起来也不居中，我们可以使用如下样式。</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">input</span> <span class="token punctuation">{</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="文本溢出省略号"><a href="#文本溢出省略号" class="header-anchor">#</a> 文本溢出省略号</h3> <p>当我们需要将多于文本用省略号显示的时候，我们可以用到如下样式。其实这个是 pc 端和移动端通用的样式。</p> <p>使用这个样式需要注意，元素必须是块级元素，或者是具有指定宽度的行内块级元素（就是<code>display: inline-block</code>）。</p> <h4 id="单行省略"><a href="#单行省略" class="header-anchor">#</a> 单行省略</h4> <div class="language-css extra-class"><pre class="language-css"><code><span class="token comment">/* 单行出现省略号*/</span>
<span class="token selector">.ellipsis</span> <span class="token punctuation">{</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token property">text-overflow</span><span class="token punctuation">:</span> ellipsis<span class="token punctuation">;</span>
  <span class="token property">white-space</span><span class="token punctuation">:</span> nowrap<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="多行省略"><a href="#多行省略" class="header-anchor">#</a> 多行省略</h4> <div class="language-css extra-class"><pre class="language-css"><code><span class="token comment">/* 多行省略号，就是想在多少行后再出现省略号就使用如下样式*/</span>
<span class="token selector">.ellipsis-n</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> -webkit-box<span class="token punctuation">;</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token property">text-overflow</span><span class="token punctuation">:</span> ellipsis<span class="token punctuation">;</span>
  <span class="token property">-webkit-line-clamp</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span> <span class="token comment">/*这个值可以随便设置，比如这里的2就是最多显示两行，两行后出现省略号*/</span>
  <span class="token property">-webkit-box-orient</span><span class="token punctuation">:</span> vertical<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="图片模糊问题"><a href="#图片模糊问题" class="header-anchor">#</a> 图片模糊问题</h3> <p>这个类似于 1px 问题，在 Retina 高清屏上才会出现，由于高清屏用多个物理像素显示一个 css 像素，比如 iphone6（750 个物理像素 375 个 css 像素），由于 dpr 为 2，所以 1css 像素会用 2 个物理像素显示，所以 1 像素的图片用 2 个物理像素显示出来就会模糊。</p> <p>解决图片模糊根本原因就是根据不同 dpr 使用不同倍数的图片。</p> <h4 id="media-查询"><a href="#media-查询" class="header-anchor">#</a> @media 查询</h4> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.avatar</span> <span class="token punctuation">{</span>
  <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>randy_1x.png<span class="token punctuation">)</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token atrule"><span class="token rule">@media</span> <span class="token keyword">only</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">-webkit-min-device-pixel-ratio</span><span class="token punctuation">:</span> 2<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token selector">.avatar</span> <span class="token punctuation">{</span>
    <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>randy_2x.png<span class="token punctuation">)</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token atrule"><span class="token rule">@media</span> <span class="token keyword">only</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">-webkit-min-device-pixel-ratio</span><span class="token punctuation">:</span> 3<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token selector">.avatar</span> <span class="token punctuation">{</span>
    <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>randy_3x.png<span class="token punctuation">)</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="image-set"><a href="#image-set" class="header-anchor">#</a> image-set</h4> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.avatar</span> <span class="token punctuation">{</span>
  <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">-webkit-image-set</span><span class="token punctuation">(</span><span class="token string">&quot;randy_1x.png&quot;</span> 1x<span class="token punctuation">,</span> <span class="token string">&quot;randy_2x.png&quot;</span> 2x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="srcset"><a href="#srcset" class="header-anchor">#</a> srcset</h4> <p>这里需要注意，这里的图片不能被 webpack 处理，就是不能被转成 base64，不然会失效。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>randy_1x.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>randy_2x.png 2x, randy_3x.png 3x<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><h4 id="js-处理"><a href="#js-处理" class="header-anchor">#</a> js 处理</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> dpr <span class="token operator">=</span> window<span class="token punctuation">.</span>devicePixelRatio<span class="token punctuation">;</span>
<span class="token keyword">const</span> images <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;img&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
images<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">img</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  img<span class="token punctuation">.</span>src<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>dpr<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">x.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="svg"><a href="#svg" class="header-anchor">#</a> svg</h4> <p>当然，我们还可以使用不失帧的 svg 图片，这样就不需要管是什么屏幕了，svg 图片会自动拉伸并且不会失帧。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>randy.svg<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><h2 id="js-方面"><a href="#js-方面" class="header-anchor">#</a> JS 方面</h2> <h3 id="点击延迟"><a href="#点击延迟" class="header-anchor">#</a> 点击延迟</h3> <p>在移动端浏览器里点击操作会存在<code>300ms</code>延迟。</p> <blockquote><p>07 年，苹果公司发布首款 Iphone 前夕，遇到一个问题：当时的网站都是为大屏设计，手机屏幕太小无法正常浏览，于是苹果工程师做了一些约定解决此类问题。
这些约定当中，最为有名的是双击缩放（double tap to zoom）,这是产生 300ms 延迟的根源。
用手指在屏幕上快速点击两次，iOS 自带的 Safari 浏览器会将网页缩放至原始比例。如果用户在 iOS Safari
里边点击了一个链接。由于用户可以进行双击缩放或者双击滚动的操作，当用户一次点击屏幕之后，浏览器并不能立刻判断用户是确实要打开这个链接，还是想要进行双击操作。因此，iOS Safari 就等待 300 毫秒，以判断用户是否再次点击了屏幕。 鉴于 iPhone 的成功，其他移动浏览器都复制了 iPhone Safari 浏览器的多数约定，包括双击缩放，几乎现在所有的移动端浏览器都有这个功能。 由此产生了 300ms 延迟问题。</p></blockquote> <p>解决点击延迟的方案有很多，下面笔者着重介绍四种。</p> <h4 id="禁止页面缩放-2"><a href="#禁止页面缩放-2" class="header-anchor">#</a> 禁止页面缩放</h4> <p>我们知道点击延迟的根源就是因为页面缩放，所以我们可以把页面禁止缩放，就能从源头上解决该问题了，但是该方案的缺点也很明显，就是页面不能缩放了。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 1.禁用缩放 user-scalable=no --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span>
  <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0, user-scalable=no<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">/&gt;</span></span>
</code></pre></div><h4 id="更改默认的视口宽度"><a href="#更改默认的视口宽度" class="header-anchor">#</a> 更改默认的视口宽度</h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>因为双击缩放主要是用来改善桌面站点在移动端浏览体验的，而随着响应式设计的普及，很多站点都已经对移动端坐过适配和优化了，这个时候就不需要双击缩放了，如果能够识别出一个网站是响应式的网站，那么移动端浏览器就可以自动禁掉默认的双击缩放行为并且去掉 300ms 的点击延迟。如果设置了上述<code>meta</code>标签，那浏览器就可以认为该网站已经对移动端做过了适配和优化，就无需双击缩放操作了。</p> <p>这个方案相比方案一的好处在于，它没有完全禁用缩放，而只是禁用了浏览器默认的双击缩放行为，但用户仍然可以通过双指缩放操作来缩放页面。</p> <h4 id="使用-zepto"><a href="#使用-zepto" class="header-anchor">#</a> 使用 zepto</h4> <p>在前端领域里最早解决点击延迟的是<code>jQuery时代</code>的<code>zepto</code>，估计现在大部分同学都未使用过<code>zepto</code>，其实它就是移动端版本的<code>jquery</code>。<code>zepto</code>封装<code>tap事件</code>能有效地解决点击穿透，我们知道移动端点击事件触发的顺序为 <code>touchstart —&gt; touchmove —&gt; touchend —&gt; click</code>，通过监听<code>document</code>上的<code>touch事件</code>（因为 click 事件在移动端有 300ms 延迟但是 touch 事件在移动端没延迟）完成<code>tap事件</code>的模拟，并将<code>tap事件</code>冒泡到<code>document</code>上触发模拟移动端的 click 事件。</p> <p>虽然 zepto 能解决点击延迟问题，但是也会带来点击穿透问题，就是如果某元素下面真实有绑定 click 的元素，我们知道事件具有传播性，就会在 tap 事件后会继续触发 click，这样就会带来点击穿透问题。</p> <p>说道这里，细心的小伙伴会发现了，为什么不在<code>touchend</code>事件里面使用<code>e.preventDefault()</code>来阻止后续事件触发呢？其实这跟 zepto 的 tap 事件实现有关，因为 zepto 的 tap 事件是全局监听<code>touchend</code>事件的，所以如果使用了<code>e.preventDefault()</code>会影响到真正的<code>touchend</code>事件。</p> <h4 id="使用-fastclick"><a href="#使用-fastclick" class="header-anchor">#</a> 使用 fastclick</h4> <p><a href="https://github.com/ftlabs/fastclick" target="_blank" rel="noopener noreferrer">fastclick<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 是 FT Labs 专门为解决移动端浏览器 300 毫秒点击延迟问题所开发的一个轻量级的库。fastclick 的实现原理是在检测到 touchend 事件的时候，会通过 DOM 自定义事件立即出发模拟一个 click 事件，并把浏览器在 300ms 之后的 click 事件阻止掉。</p> <p>fastclick 不但能解决点击延迟而且不会带来点击穿透问题，是点击延迟的最优解。具体使用方法可以查看<a href="https://github.com/ftlabs/fastclick" target="_blank" rel="noopener noreferrer">官方文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h3 id="时间问题"><a href="#时间问题" class="header-anchor">#</a> 时间问题</h3> <p>在苹果系统上解析<code>YYYY-MM-DD HH:mm:ss</code>这种日期格式会报错，但在安卓系统上解析这种日期格式完全无问题。但是<code>YYY/MM/DD HH:mm:ss</code>这种日期格式在苹果和安卓上都能正常运行，所以我们只需要统一使用这种方案就可以了。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> date <span class="token operator">=</span> <span class="token string">&quot;2010-12-31 12:30:00&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\-</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="滚动到指定位置"><a href="#滚动到指定位置" class="header-anchor">#</a> 滚动到指定位置</h3> <p>这个技巧在 pc 端和移动端都适用，使用<a href="https://developer.mozilla.org/zh-CN/docs/web/api/element/scrollintoview" target="_blank" rel="noopener noreferrer">Element.scrollIntoView()<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>方法，我们再也不需要使用<code>window.scrollBy()</code>和<code>window.scrollTo()</code>来实现滚动到指定位置了。</p> <div class="language-html extra-class"><pre class="language-html"><code>element.scrollIntoView(); // 等同于element.scrollIntoView(true)
element.scrollIntoView(alignToTop); // Boolean型参数
element.scrollIntoView(scrollIntoViewOptions); // Object型参数
</code></pre></div><p><code>alignToTop</code>可选,一个 Boolean 值：</p> <ul><li>如果为<code>true</code>，元素的顶端将和其所在滚动区的可视区域的顶端对齐。相应的  <code>scrollIntoViewOptions: {block: &quot;start&quot;, inline: &quot;nearest&quot;}</code>。这是这个参数的默认值。</li> <li>如果为<code>false</code>，元素的底端将和其所在滚动区的可视区域的底端对齐。相应的<code>scrollIntoViewOptions: {block: &quot;end&quot;, inline: &quot;nearest&quot;}</code>。</li></ul> <p><code>scrollIntoViewOptions</code>  可选,一个包含下列属性的对象：</p> <ul><li><code>behavior</code>  可选，定义动画过渡效果， <code>&quot;auto&quot;</code>或  <code>&quot;smooth&quot;</code>  之一。默认为  <code>&quot;auto&quot;</code>。</li> <li><code>block</code>  可选，定义垂直方向的对齐， <code>&quot;start&quot;</code>, <code>&quot;center&quot;</code>, <code>&quot;end&quot;</code>,  或  <code>&quot;nearest 就近对齐&quot;</code>之一。默认为  <code>&quot;start&quot;</code>。</li> <li><code>inline</code>  可选，定义水平方向的对齐， <code>&quot;start&quot;</code>, <code>&quot;center&quot;</code>, <code>&quot;end&quot;</code>,  或  <code>&quot;nearest 就近对齐&quot;</code>之一。默认为  <code>&quot;nearest 就近对齐&quot;</code>。</li></ul> <h3 id="横屏和竖屏-2"><a href="#横屏和竖屏-2" class="header-anchor">#</a> 横屏和竖屏</h3> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;resize&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>orientation <span class="token operator">===</span> <span class="token number">180</span> <span class="token operator">||</span> window<span class="token punctuation">.</span>orientation <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 正常方向或屏幕旋转180度</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;竖屏&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>orientation <span class="token operator">===</span> <span class="token number">90</span> <span class="token operator">||</span> window<span class="token punctuation">.</span>orientation <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">90</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 屏幕顺时钟旋转90度或屏幕逆时针旋转90度</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;横屏&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="iphonex-适配"><a href="#iphonex-适配" class="header-anchor">#</a> iPhoneX 适配</h2> <h3 id="viewport-fit"><a href="#viewport-fit" class="header-anchor">#</a> viewport-fit</h3> <p><code>viewport-fit</code>是专门为了适配<code>iPhoneX</code>而诞生的一个属性，它用于限制网页如何在安全区域内进行展示。</p> <p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2b4b8bea2f3f4d2a94f91e9360bad408~tplv-k3u1fbpfcp-watermark.image?" alt="cc930e75508a4e2d93f92fabe835931c_tplv-k3u1fbpfcp-watermark.png"></p> <ul><li><p><code>contain</code>: 可视窗口完全包含网页内容</p></li> <li><p><code>cover</code>：网页内容完全覆盖可视窗口</p></li></ul> <p>默认情况下或者设置为<code>auto</code>和<code>contain</code>效果相同。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport-fit=cover<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><h3 id="env、constant"><a href="#env、constant" class="header-anchor">#</a> env、constant</h3> <p>我们需要将顶部和底部合理的摆放在安全区域内，<code>iOS11</code>新增了两个<code>CSS</code>函数<code>env、constant</code>，用于设定安全区域与边界的距离。</p> <p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bf1519e34d194a4b9193a993f68c8b93~tplv-k3u1fbpfcp-watermark.image?" alt="37944c89b2244681a6fa1e7a63c64d4c_tplv-k3u1fbpfcp-watermark.png"></p> <p><code>onstant</code>在<code>iOS &lt; 11.2</code>的版本中生效，<code>env</code>在<code>iOS &gt;= 11.2</code>的版本中生效，这意味着我们往往要同时设置他们，将页面限制在安全区域内：</p> <p>函数内部可以是四个常量：</p> <ul><li><code>safe-area-inset-left</code>：安全区域距离左边边界距离</li> <li><code>safe-area-inset-right</code>：安全区域距离右边边界距离</li> <li><code>safe-area-inset-top</code>：安全区域距离顶部边界距离</li> <li><code>safe-area-inset-bottom</code>：安全区域距离底部边界距离</li></ul> <p>注意：我们必须指定<code>viweport-fit</code>后才能使用这两个函数。</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">body</span> <span class="token punctuation">{</span>
  <span class="token property">padding-bottom</span><span class="token punctuation">:</span> <span class="token function">constant</span><span class="token punctuation">(</span>safe-area-inset-bottom<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">padding-bottom</span><span class="token punctuation">:</span> <span class="token function">env</span><span class="token punctuation">(</span>safe-area-inset-bottom<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="深色主题适配方案"><a href="#深色主题适配方案" class="header-anchor">#</a> 深色主题适配方案</h2> <p>随着 iOS 13 的发布，深色模式（Dark Mode）越来越多地出现在大众的视野中，支持深色模式已经成为现代移动应用和网站的一个潮流，前段时间更是因为微信的适配再度引起热议。深色模式不仅可以大幅减少电量的消耗，减弱强光对比,还能提供更好的可视性和沉浸感。</p> <h3 id="如何切换深色模式"><a href="#如何切换深色模式" class="header-anchor">#</a> 如何切换深色模式</h3> <ul><li>iOS：设置-&gt;显示与亮度-&gt;外观-&gt;选择深色。</li> <li>Android：系统设置-&gt;显示-&gt;深色模式。</li></ul> <h3 id="适配方案"><a href="#适配方案" class="header-anchor">#</a> 适配方案</h3> <p>如果系统设置了深色模式，H5 页面不做相应的处理，会出现背景色冲突、深色文字显示异常，深色图标显示异常等一些显示上的问题。</p> <h4 id="声明-color-scheme"><a href="#声明-color-scheme" class="header-anchor">#</a> 声明 color-scheme</h4> <p>在 head 中声明<code>&lt;meta name=&quot;color-scheme&quot; content=&quot;light dark&quot;&gt;</code>，声明当前页面支持 light 和 dark 两种模式，系统切换到深色模式时，浏览器默认样式也会切换到深色；具体细节可以查看 <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/color-scheme" target="_blank" rel="noopener noreferrer">color-scheme 文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>或者使用 css 申名，也能达到同样的效果。</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">:root</span> <span class="token punctuation">{</span>
  <span class="token property">color-scheme</span><span class="token punctuation">:</span> light dark<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="prefers-color-scheme"><a href="#prefers-color-scheme" class="header-anchor">#</a> prefers-color-scheme</h4> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/@media/prefers-color-scheme" target="_blank" rel="noopener noreferrer">prefers-color-scheme<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> CSS 媒体特性用于检测用户是否有将系统的主题色设置为亮色或者暗色。我们可以通过监听用户所设置的主题来进行一些特殊样式的处理。</p> <ul><li>no-preference</li></ul> <p>表示系统未得知用户在这方面的选项。在布尔值上下文中，其执行结果为 false。</p> <ul><li>light</li></ul> <p>表示用户已告知系统他们选择使用浅色主题的界面。</p> <ul><li>dark</li></ul> <p>表示用户已告知系统他们选择使用暗色主题的界面。</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">:root</span> <span class="token punctuation">{</span>
  <span class="token property">color-scheme</span><span class="token punctuation">:</span> light dark<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> black<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">prefers-color-scheme</span><span class="token punctuation">:</span> dark<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token selector">:root</span> <span class="token punctuation">{</span>
    <span class="token property">background</span><span class="token punctuation">:</span> black<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="js-中的处理"><a href="#js-中的处理" class="header-anchor">#</a> JS 中的处理</h4> <p>除了 CSS 的媒体查询能获取用户主题，在 JS 中我们也能获取得到用户的主题。</p> <p>matchMedia</p> <p>Window 的<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/matchMedia" target="_blank" rel="noopener noreferrer">matchMedia()<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 方法返回一个新的 MediaQueryList 对象，表示指定的媒体查询 (en-US)字符串解析后的结果。返回的 MediaQueryList 可被用于判定 Document 是否匹配媒体查询，或者监控一个 document 来判定它匹配了或者停止匹配了此媒体查询。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> mqList <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">matchMedia</span><span class="token punctuation">(</span>mediaQueryString<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>addListener()</p> <p>MediaQueryList 接口的<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/MediaQueryList/addListener" target="_blank" rel="noopener noreferrer">addListener()<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>方法向 MediaQueryListener 添加一个侦听器，该侦听器将运行自定义回调函数以响应媒体查询状态的更改。</p> <div class="language-js extra-class"><pre class="language-js"><code>MediaQueryList<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在 JS 中需要这两者配合使用</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> mediaQuery <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">matchMedia</span><span class="token punctuation">(</span><span class="token string">&quot;(prefers-color-scheme: dark)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">darkModeHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>mediaQuery<span class="token punctuation">.</span>matches<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;现在是深色模式&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;现在是浅色模式&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 监听模式变化</span>
mediaQuery<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span>darkModeHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="参考文章"><a href="#参考文章" class="header-anchor">#</a> 参考文章</h2> <p><a href="https://juejin.cn/post/6921886428158754829" target="_blank" rel="noopener noreferrer">中高级前端必须注意的 40 条移动端 H5 坑位指南 | 网易三年实践<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://juejin.cn/post/6844903845617729549" target="_blank" rel="noopener noreferrer">关于移动端适配，你必须要知道的<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://juejin.cn/post/7046169975706353701" target="_blank" rel="noopener noreferrer">2022 年移动端适配方案指南 — 全网最新最全<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="后记"><a href="#后记" class="header-anchor">#</a> 后记</h2> <p>本文为笔者个人学习笔记，如有谬误，还请告知，万分感谢！如果本文对你有所帮助，还请点个赞~~</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/H5/移动端H5网页开发必备知识.html" class="prev">
        移动端H5网页开发必备知识
      </a></span> <span class="next"><a href="/H5/移动端开发必备知识-HybridApp.html">
        移动端开发必备知识-HybridApp
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.30255e96.js" defer></script><script src="/assets/js/2.3fe5eade.js" defer></script><script src="/assets/js/16.07451047.js" defer></script>
  </body>
</html>
